#pragma config(Motor,  motor7,          LHerder,       tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor8,          Strafe,        tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor9,          Arm,           tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor10,         LMotor,        tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor11,         RHerder,       tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor12,         RMotor,        tmotorVexIQ, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

task main()
{
	//CHA Vertical Travel
	//CHB Yaw
	//CHC Horizontal Travel
	//CHD Arm

	int Lherding1, Lherding2, Rherding1, Rherding2;

	while(true){
		//Grab the joystick values and save them into variables
		//The float type means floating point or decimal
		float speedInput = getJoystickValue(ChA);
		float turnInput = getJoystickValue(ChB);
		float strafeInput = getJoystickValue(ChC);
		float armInput = getJoystickValue(ChD);

		if(Lherding1 == false && getJoystickValue(BtnEUp) == true) setMotorTarget(LHerder, 75, 50);
		if(Lherding2 == false && getJoystickValue(BtnEDown) == true) setMotorTarget(LHerder, 0,50);


		if(Rherding1 == true && getJoystickValue(BtnFUp) == false) setMotorTarget(RHerder, 75, 50);
		if(Rherding2 == true && getJoystickValue(BtnFDown) == false) setMotorTarget(RHerder, 0,50);


		Lherding1 = getJoystickValue(BtnEUp);
		Lherding2 = getJoystickValue(BtnEDown);
		Rherding1 = getJoystickValue(BtnFUp);
		Rherding2 = getJoystickValue(BtnFDown);

		//check if controller value is small enough
		//if it is make it zero
		//this accounts for the poor build of certain controllers minimizing drift
		//abs will remove the negative sign from a number
		if(abs(speedInput) < 0.1) speedInput = 0;
		if(abs(turnInput) < 0.1) turnInput = 0;
		if(abs(strafeInput) < 0.1) strafeInput = 0;
		if(abs(armInput) < 0.1) armInput = 0;

		//Set the drive motors
		//this is an arcade format
		setMotor(LMotor, speedInput-turnInput);
		setMotor(RMotor, speedInput+turnInput);

		//Set the arm and strafe motors



		//TODO: add safety

		if(getMotorEncoder(Arm) <= 0 && armInput < 0){
			setMotor(Arm,0);
		}
		if(getMotorEncoder(Arm) >= 500 && armInput > 0){
			setMotor(Arm,0);
		}
		else{
			setMotor(Arm, armInput);
			setMotor(Strafe, strafeInput);
		}
	}


}
